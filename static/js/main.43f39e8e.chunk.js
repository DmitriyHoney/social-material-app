(this["webpackJsonpbank-app"]=this["webpackJsonpbank-app"]||[]).push([[0],{129:function(e,t,a){e.exports={btn:"Button_btn__3AR_o"}},130:function(e,t,a){e.exports={btnGhost:"ButtonGhost_btnGhost__1UWc7"}},131:function(e,t,a){e.exports={section:"Header_section__2WCnC"}},132:function(e,t,a){e.exports={logo:"Logotype_logo__2aaDg"}},134:function(e,t,a){e.exports={smAvatar:"SmallAvatar_smAvatar__3VOSB"}},135:function(e,t,a){e.exports={searchWrap:"SearchComponent_searchWrap__34ZXC"}},136:function(e,t,a){e.exports=a.p+"static/media/prelodader.3a6ebddb.svg"},139:function(e,t,a){e.exports={section:"SocialBlock_section__QMjFn"}},14:function(e,t,a){e.exports={innerClass:"Paginator_innerClass__zhdNd",activeLinkClass:"Paginator_activeLinkClass__1apLF",linkClass:"Paginator_linkClass__1aM3n",linkClassNext:"Paginator_linkClassNext__2vqnW"}},140:function(e,t,a){},141:function(e,t,a){e.exports={error:"EditProfileForm_error__2ZW_4"}},143:function(e,t,a){e.exports={error:"LoginForm_error__3UGCf"}},171:function(e,t,a){e.exports=a(302)},176:function(e,t,a){},177:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},204:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(62),c=a.n(s),o=(a(176),a(20)),i=a(21),l=a(23),u=a(22),p=a(10),m=(a(177),a(129)),f=a.n(m),d=function(e){return r.a.createElement("div",null,r.a.createElement("button",Object.assign({disabled:e.disabled,className:f.a.btn},e),e.value))},b=a(130),h=a.n(b),E=function(e){return r.a.createElement("div",null,r.a.createElement("button",Object.assign({disabled:e.disabled,className:h.a.btnGhost},e),e.value))},g=a(131),v=a.n(g),k=a(132),C=a.n(k),O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#",className:C.a.logo},"Logotype"))},j=function(e){var t=e.isAuth&&r.a.createElement("div",null,e.login,r.a.createElement(E,{value:"Logout",onClick:function(){e.logoutThunkCallback()}}));return r.a.createElement("header",{className:v.a.section},r.a.createElement(O,null),t)},_=a(52),P=a.n(_),U=a(17),y=function(e){if(!e.show)return r.a.createElement("div",{className:P.a.section},r.a.createElement("ul",null,r.a.createElement("li",{className:P.a.item},r.a.createElement(U.b,{to:"/profile"},r.a.createElement("i",{className:"material-icons"},"\ue851"))),r.a.createElement("li",{className:P.a.item},r.a.createElement(U.b,{to:"/dialogs"},r.a.createElement("i",{className:"material-icons"},"\ue0b7"))),r.a.createElement("li",{className:P.a.item},r.a.createElement(U.b,{to:"/users"},r.a.createElement("i",{className:"material-icons"},"\ue0ba")))))},S=a(28),w=a(133),F=a.n(w),N=a(14),A=a.n(N),T=function(e){var t=Object(n.useState)(e.activePage),a=Object(S.a)(t,2),s=a[0],c=a[1];Object(n.useEffect)((function(){c(e.activePage)}),[e.activePage]);var o={innerClass:A.a.innerClass,activeClass:A.a.activeClass,activeLinkClass:A.a.activeLinkClass,itemClass:A.a.itemClass,itemClassFirst:A.a.itemClassFirst,itemClassPrev:A.a.itemClassPrev,itemClassNext:A.a.itemClassNext,itemClassLast:A.a.itemClassLast,disabledClass:A.a.disabledClass,linkClass:A.a.linkClass,linkClassFirst:A.a.linkClassFirst,linkClassPrev:A.a.linkClassPrev,linkClassNext:A.a.linkClassNext,linkClassLast:A.a.linkClassLast};return r.a.createElement("div",null,r.a.createElement(F.a,Object.assign({},e,{activePage:s,onChange:function(t){c(t),e.onChange(t)}},o)))},x=(a(184),a(65)),I=a.n(x),D=a(134),L=a.n(D),R=function(e){var t="/profile/".concat(e.id);return r.a.createElement(U.b,{to:t},r.a.createElement("img",{src:e.src||I.a,alt:"user-avatar",className:L.a.smAvatar}))},M=function(e){var t=e.users.map((function(t){var a=t.id,n=t.photos,s=t.name,c=t.status,o=t.followed;return r.a.createElement("div",{key:a},r.a.createElement("div",null,r.a.createElement(R,{src:n.small,id:a}),r.a.createElement("h3",null,s)),r.a.createElement("p",null,c||"No status"),e.myId!==a&&r.a.createElement(d,{value:o?"Unfollow":"Follow",onClick:function(){return t=a,void e.toggleFollow(t);var t},disabled:e.usersProcessingSubscribe.some((function(e){return e===a}))}))}));return r.a.createElement("div",null,t)},B=a(135),G=a.n(B),W=function(e){var t=r.a.createRef(),a=Object(n.useState)(e.findUserState),s=Object(S.a)(a,2),c=s[0],o=s[1];Object(n.useEffect)((function(){o(e.findUserState)}),[e.findUserState]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Find by name"),r.a.createElement("div",{className:G.a.searchWrap},r.a.createElement("input",{placeholder:"Search",ref:t,onChange:function(t){var a=t.target.value;e.setFindUserAC(a)},value:c}),r.a.createElement(d,{value:"Search",onClick:function(){e.onClick(t.current)}}),r.a.createElement(d,{value:"Reset",onClick:function(t){e.setFindUserAC(""),e.onClick()}})))},z=(a(185),function(e){var t=function(t){e.getFilterUsers(t.target.name)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",{for:"allUsers"},"All Users"),r.a.createElement("input",{type:"radio",id:"allUsers",name:"allUsers",checked:e.propertiesFindByFilter.allUsers,onChange:t})),r.a.createElement("div",null,r.a.createElement("label",{for:"onlyFriends"},"Only Friends"),r.a.createElement("input",{type:"radio",id:"onlyFriends",name:"onlyFriends",checked:e.propertiesFindByFilter.onlyFriends,onChange:t})),r.a.createElement("div",null,r.a.createElement("label",{for:"notFriends"},"Not Friends"),r.a.createElement("input",{type:"radio",id:"notFriends",name:"notFriends",checked:e.propertiesFindByFilter.notFriends,onChange:t}))))}),J=a(136),q=a.n(J),V=function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:q.a,alt:"preloader"}))},Z=function(e){var t=Number(Math.ceil(e.totalCount/e.countUsers)+"0");return r.a.createElement("div",null,t>10&&r.a.createElement(T,{hideDisabled:!0,totalItemsCount:t,pageRangeDisplayed:5,onChange:function(t){e.changeCurrentPage(t)},activePage:e.activePage,setCurrentPageAC:e.setCurrentPageAC}),r.a.createElement(W,{onClick:function(t){t&&e.searchPeople(t.value),e.searchPeople()},setFindUserAC:e.setFindUserAC,findUserState:e.findUserState}),r.a.createElement(z,{propertiesFindByFilter:e.propertiesFindByFilter,getFilterUsers:e.getFilterUsers}),e.usersPreloader?r.a.createElement(V,null):r.a.createElement(M,{myId:e.myId,users:e.users,toggleFollow:e.toggleFollow,usersProcessingSubscribe:e.usersProcessingSubscribe}))},Y=a(6),H=a(11),X=a(9),K=a.n(X),Q=a(13),$=a(95),ee=a(2),te=a(138).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"718dc875-a290-4b03-a341-95d2eb3ffe02"}}),ae=function(e){return te.get("profile/".concat(e))},ne=function(e){return te.get("profile/status/".concat(e))},re=function(e){return te.put("profile/status",{status:e})},se=function(e){return te.put("profile/photo",e,{headers:{"content-type":"multipart/form-data"}})},ce=function(e){return te.put("profile",Object(ee.a)(Object(ee.a)({},e),{},{AboutMe:e.aboutMe}))},oe=function(){return te.get("auth/me")},ie=function(e){return te.post("auth/login",Object(ee.a)({},e))},le=function(){return te.delete("auth/login")},ue=function(){return te.delete("/security/get-captcha-url")},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"7",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return te.get("users/?page=".concat(e,"&count=").concat(t,"&friend=").concat(a,"&term=").concat(n))},me=function(e){return te.get("follow/".concat(e))},fe=function(e){return te.post("follow/".concat(e))},de=function(e){return te.delete("follow/".concat(e))},be="bank-app/users-reducer/SET_USERS",he="bank-app/users-reducer/SET_TOTAL_COUNT",Ee="bank-app/users-reducer/SET_CURRENT_PAGE",ge="bank-app/users-reducer/ADD_USER_TO_STACK",ve="bank-app/users-reducer/SET_FIND_USER",ke="bank-app/users-reducer/SET_FRIEND_PROPERTY",Ce="bank-app/users-reducer/TOGGLE_USERS_PRELOADER",Oe={items:[{name:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0411\u043e\u043b\u044c\u0448\u0430\u043a\u043e\u0432",id:6722,uniqueUrlName:null,photos:{small:"https://social-network.samuraijs.com/activecontent/images/users/6722/user-small.jpg?v=1",large:"https://social-network.samuraijs.com/activecontent/images/users/6722/user.jpg?v=1"},status:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0435\u0431\u044f",followed:!1},{name:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0414\u0435\u0440\u0438\u0434",id:6639,uniqueUrlName:null,photos:{small:"https://social-network.samuraijs.com/activecontent/images/users/6639/user-small.jpg?v=1",large:"https://social-network.samuraijs.com/activecontent/images/users/6639/user.jpg?v=1"},status:"\u0412\u0441\u0435\u043c , \u043f\u0440\u0438\u0432\u0435\u0442!!!",followed:!0}],totalCount:null,error:null,currentPage:1,friend:"",findUser:"",countUsers:7,usersProcessingSubscribe:[],propertiesFindByFilter:{allUsers:!0,onlyFriends:!1,notFriends:!1},usersPreloader:!0};function je(e,t){for(var a in e)String(a)===t?e[a]=!0:e[a]=!1;return e}var _e=function(e){return{type:be,users:e}},Pe=function(e){return{type:he,totalCount:e}},Ue=function(e){return{type:Ee,newPageNumber:e}},ye=function(e){return{type:"bank-app/users-reducer/TOGGLE_SUBSCRIBE_ON_USER",userId:e}},Se=function(e,t){return{type:ge,userId:e,bool:t}},we=function(e){return{type:ke,value:e}},Fe=function(e){return{type:Ce,bool:e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(Q.a)(K.a.mark((function t(a,n){var r,s,c,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Fe(!0)),r=n().usersPage.countUsers,s=n().usersPage.friend,c=n().usersPage.findUser,a(Ue(e)),t.next=7,pe(e,r,s,c);case 7:o=t.sent,a(Fe(!1)),a(_e(o.data.items)),a(Pe(o.data.totalCount));case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(ee.a)(Object(ee.a)({},e),{},{items:Object($.a)(t.users)});case he:return Object(ee.a)(Object(ee.a)({},e),{},{totalCount:t.totalCount});case Ee:return Object(ee.a)(Object(ee.a)({},e),{},{currentPage:t.newPageNumber});case"bank-app/users-reducer/TOGGLE_SUBSCRIBE_ON_USER":return Object(ee.a)(Object(ee.a)({},e),{},{items:e.items.map((function(e){return e.id===t.userId?Object(ee.a)(Object(ee.a)({},e),{},{followed:!e.followed}):e}))});case ve:return Object(ee.a)(Object(ee.a)({},e),{},{findUser:t.findUser});case Ce:return Object(ee.a)(Object(ee.a)({},e),{},{usersPreloader:t.bool});case ge:return t.bool?Object(ee.a)(Object(ee.a)({},e),{},{usersProcessingSubscribe:[].concat(Object($.a)(e.usersProcessingSubscribe),[t.userId])}):Object(ee.a)(Object(ee.a)({},e),{},{usersProcessingSubscribe:e.usersProcessingSubscribe.filter((function(e){return e!==t.userId}))});case"bank-app/users-reducer/SET_PROPERTIES_BY_FILTER":return Object(ee.a)(Object(ee.a)({},e),{},{propertiesFindByFilter:Object(ee.a)({},t.obj)});case ke:return Object(ee.a)(Object(ee.a)({},e),{},{friend:t.value});default:return e}},Te=function(e){return e.profilePage.userCard},xe=function(e){return e.profilePage.isInitialized},Ie=function(e){return e.profilePage.userStatus},De=function(e){return e.profilePage.isUserCheck},Le=function(e){return e.profilePage.itsMe},Re=function(e){return e.authPage.isAuth},Me=function(e){return e.authPage.captchaUrl},Be=function(e){return e.usersPage.items},Ge=function(e){return e.usersPage.totalCount},We=function(e){return e.usersPage.countUsers},ze=function(e){return e.usersPage.usersProcessingSubscribe},Je=function(e){return e.usersPage.currentPage},qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeCurrentPage=function(e){n.props.getUsersThunkCallback(e)},n.searchPeople=function(){n.props.setCurrentPageAC(1),n.props.getUsersThunkCallback()},n.toggleFollow=function(e){n.props.toggleFollowThunkCallback(e)},n.getFilterUsers=function(e){n.props.getFilterUsersThunkCallback(e)},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){this.props.getUsersThunkCallback()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,{users:this.props.users,changeCurrentPage:this.changeCurrentPage,totalCount:this.props.totalCount,countUsers:this.props.countUsers,toggleFollow:this.toggleFollow,usersProcessingSubscribe:this.props.usersProcessingSubscribe,searchPeople:this.searchPeople,setFindUserAC:this.props.setFindUserAC,activePage:this.props.currentPage,setCurrentPageAC:this.props.setCurrentPageAC,findUserState:this.props.findUserState,propertiesFindByFilter:this.props.propertiesFindByFilter,getFilterUsers:this.getFilterUsers,myId:this.props.myId,usersPreloader:this.props.usersPreloader}))}}]),a}(r.a.Component),Ve=Object(Y.d)(Object(H.b)((function(e){return{users:Be(e),totalCount:Ge(e),countUsers:We(e),usersProcessingSubscribe:ze(e),currentPage:Je(e),findUserState:e.usersPage.findUser,propertiesFindByFilter:e.usersPage.propertiesFindByFilter,usersPreloader:e.usersPage.usersPreloader}}),{getUsersThunkCallback:Ne,toggleFollowThunkCallback:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a){var n,r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Se(e,!0)),t.next=3,me(e);case 3:if(n=t.sent,!n.data){t.next=11;break}return t.next=8,de(e);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,fe(e);case 13:r=t.sent;case 14:0===r.data.resultCode&&a(ye(e)),a(Se(e,!1));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setFindUserAC:function(e){return{type:ve,findUser:e}},setCurrentPageAC:Ue,getFilterUsersThunkCallback:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a,n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=je(n().usersPage.propertiesFindByFilter,e),a({type:"bank-app/users-reducer/SET_PROPERTIES_BY_FILTER",obj:r}),t.t0=e,t.next="allUsers"===t.t0?5:"onlyFriends"===t.t0?7:"notFriends"===t.t0?9:11;break;case 5:return a(we("")),t.abrupt("break",11);case 7:return a(we(!0)),t.abrupt("break",11);case 9:return a(we(!1)),t.abrupt("break",11);case 11:a(Ne());case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}))(qe),Ze=function(e){return r.a.createElement("div",null,"Dialogs")},Ye=(a(204),a(53)),He=a.n(Ye),Xe=a(42),Ke=a.n(Xe),Qe=(a(73),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState({isPreload:!0}),e.target.files.length>0&&n.props.setNewProfilePhoto(e.target.files[0])},n.state={isPreload:!1},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){if(e!==this.props)return this.setState({isPreload:!1}),!0}},{key:"render",value:function(){var e=r.a.createElement("div",{className:Ke.a.overlay},r.a.createElement("div",{className:Ke.a.wrapForInput},r.a.createElement("label",{className:Ke.a.label,htmlFor:"file"},"Edit"),r.a.createElement("input",{type:"file",id:"file",onChange:this.handleInput})));return this.state.isPreload?r.a.createElement("div",{className:Ke.a.avatar},r.a.createElement("div",null,"Load...")):r.a.createElement("div",{className:Ke.a.avatar},r.a.createElement("img",{src:this.props.src||I.a,alt:"avatar"}),this.props.itsMe&&e)}}]),a}(r.a.Component)),$e=a(91),et=a.n($e),tt=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(e.status),i=Object(S.a)(o,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){u(e.status)}),[e.status]),s?r.a.createElement("input",{type:"text",value:l,onChange:function(e){u(e.target.value)},onBlur:function(t){c(!1),e.status!==l&&e.changeUserStatus(l)},autoFocus:!0,className:et.a.input}):r.a.createElement("div",{className:et.a.section,onDoubleClick:function(){e.itsMe&&c(!0)}},l||u("SET STATUS"))})),at=a(68),nt=a.n(at),rt=function(e){return r.a.createElement("div",{className:nt.a.section},r.a.createElement("h3",{className:nt.a.name},r.a.createElement("span",null,"I`m")," ",e.fullName),r.a.createElement("p",{className:nt.a.about},e.aboutMe||"User not tell about yourself"))},st=a(139),ct=a.n(st),ot=function(e){var t=function(e){var t=[],a=0;for(var n in e)if(null!==e[n]&&""!==e[n])switch(n){case"facebook":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-facebook"}))));break;case"website":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-desktop"}))));break;case"vk":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-vk"}))));break;case"twitter":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-twitter"}))));break;case"instagram":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-instagram"}))));break;case"youtube":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-youtube-play"}))));break;case"github":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-github"}))));break;case"mainLink":t.push(r.a.createElement("li",{key:a++},r.a.createElement("a",{href:"".concat(e[n])},r.a.createElement("i",{className:"fa fa-address-book-o"}))))}return t}(e.contacts);return r.a.createElement("ul",{className:ct.a.section},t.length>0?t:"Not social links")},it=a(69),lt=a.n(it),ut=function(e){return r.a.createElement("div",{className:lt.a.section},e.text,": ",e.verify?r.a.createElement("span",{className:lt.a.check},r.a.createElement("i",{className:"fa fa-check-circle"})):r.a.createElement("span",{className:lt.a.fail},r.a.createElement("i",{className:"fa fa-window-close"})))},pt=a(140),mt=a.n(pt),ft=a(66),dt=a(126),bt=a(127),ht=a(145),Et=a(92),gt=a.n(Et),vt=function(e){return function(t){var a=t.input,n=t.meta,s=Object(ht.a)(t,["input","meta"]),c=n.touched&&n.error;return r.a.createElement("div",{className:gt.a.formControl+" "+(c?gt.a.error:"")},r.a.createElement("div",null,r.a.createElement(e,Object.assign({},a,s))),c&&r.a.createElement("span",null,n.error))}},kt=vt("input"),Ct=vt("textarea"),Ot=a(141),jt=a.n(Ot),_t=function(e){var t=e.error.map((function(e,t){return r.a.createElement("div",{key:t},e)}));return r.a.createElement("ul",{className:jt.a.error},t)},Pt=Object(bt.a)({form:"edit-profile"})((function(e){var t=e.initialValues.contacts;t.vk,t.youtube,t.facebook,t.github,t.instagram,t.mainLink,t.twitter,t.website;return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("h2",null,"Edit Profile"),r.a.createElement(dt.a,{component:kt,placeholder:"FullName",name:"fullName"}),r.a.createElement(dt.a,{component:Ct,placeholder:"AboutMe",name:"aboutMe"}),r.a.createElement("div",null,r.a.createElement("label",Object(ft.a)({htmlFor:"lookingForAJob"},"htmlFor","lookingForAJob"),"lookingForAJob"),r.a.createElement(dt.a,{component:kt,placeholder:"lookingForAJob",type:"checkbox",id:"lookingForAJob",name:"lookingForAJob"})),r.a.createElement(dt.a,{component:Ct,placeholder:"lookingForAJobDescription",name:"lookingForAJobDescription"}),r.a.createElement("div",null,r.a.createElement("h3",null,"Contacts:"),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"github",name:"contacts.github"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"vk",name:"contacts.vk"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"facebook",name:"contacts.facebook"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"instagram",name:"contacts.instagram"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"twitter",name:"contacts.twitter"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"website",name:"contacts.website"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"youtube",name:"contacts.youtube"})),r.a.createElement("div",null,r.a.createElement(dt.a,{component:kt,placeholder:"mainLink",name:"contacts.mainLink"}))),r.a.createElement("button",null,"Send"),e.error&&r.a.createElement(_t,{error:e.error}))})),Ut=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),s=a[0],c=a[1],o=r.a.createElement("button",{onClick:function(){return c(!0)}},"Edit Profile");return s&&(o=r.a.createElement(Pt,{onSubmit:function(t){var a={vk:t.contacts.vk,youtube:t.contacts.youtube,facebook:t.contacts.facebook,github:t.contacts.github,instagram:t.contacts.instagram,mainLink:t.contacts.mainLink,twitter:t.contacts.twitter,website:t.contacts.website};e.sendEditProfileData(Object(ee.a)(Object(ee.a)({},t),{},{contacts:a})).then((function(){return c(!1)}),(function(){return c(!0)}))},initialValues:e})),r.a.createElement("div",{className:mt.a.editProfileWrap},o)},yt=r.a.memo((function(e){var t=e.userData,a=t.aboutMe,n=t.contacts,s=t.lookingForAJob,c=t.lookingForAJobDescription,o=t.fullName,i=(t.userId,t.photos);return r.a.createElement("div",{className:He.a.section},r.a.createElement("div",{className:He.a.avatar},r.a.createElement(Qe,{src:i.large,setNewProfilePhoto:e.setNewProfilePhoto,itsMe:e.itsMe})),r.a.createElement("div",{className:He.a.infoWrap},r.a.createElement("div",{className:He.a.info},r.a.createElement(tt,{status:e.status,changeUserStatus:e.changeUserStatus,itsMe:e.itsMe}),r.a.createElement(rt,{aboutMe:a,fullName:o})),r.a.createElement(ut,{text:"Looking for a job",verify:s}),r.a.createElement("p",null,"Looking for a job description: ",c),e.itsMe&&r.a.createElement(Ut,Object.assign({sendEditProfileData:e.sendEditProfileData},e.userData))),r.a.createElement(ot,{contacts:n}))})),St=r.a.memo((function(e){var t=Object(ee.a)({},e.userCard);return e.isUserCheck?r.a.createElement("div",null,r.a.createElement(yt,{userData:t,status:e.status,changeUserStatus:e.changeUserStatus,setNewProfilePhoto:e.setNewProfilePhoto,sendEditProfileData:e.sendEditProfileData,itsMe:e.itsMe})):r.a.createElement("div",null,"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442")})),wt=a(35),Ft="bank-app/profile-reducer/SET_USER_DATA",Nt="bank-app/profile-reducer/SET_INITIALIZED",At="bank-app/profile-reducer/SET_USER_STATUS",Tt="bank-app/profile-reducer/SET_UNKNOWN_USER",xt="bank-app/profile-reducer/SET_NEW_PHOTOS",It="bank-app/auth-reducer/ITS_ME",Dt={isInitialized:!1,userStatus:"",isUserCheck:!1,itsMe:!1,userCard:{aboutMe:null,contacts:{facebook:null,website:null,vk:null,twitter:null,instagram:null,youtube:null,github:null,mainLink:null},lookingForAJob:!1,lookingForAJobDescription:null,fullName:null,userId:null,photos:{small:null,large:null}}},Lt=function(e){return{type:Nt,bool:e}},Rt=function(e){return{type:At,userStatus:e}},Mt=function(e){return{type:It,bool:e}},Bt=function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a,n){var r,s,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authPage.userTechnicalData.id,s=Number(e||r),a(Mt(s===r)),a(Lt(!1)),t.next=6,ae(s);case 6:c=t.sent,a(Lt(!0)),a((o=c.data,{type:Ft,dataFromApi:o})),a({type:Tt,bool:!0});case 10:case"end":return t.stop()}var o}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Object(ee.a)(Object(ee.a)({},e),{},{userCard:Object(ee.a)({},t.dataFromApi)});case Nt:return Object(ee.a)(Object(ee.a)({},e),{},{isInitialized:t.bool});case At:return Object(ee.a)(Object(ee.a)({},e),{},{userStatus:t.userStatus});case Tt:return Object(ee.a)(Object(ee.a)({},e),{},{isUserCheck:t.bool});case xt:return Object(ee.a)(Object(ee.a)({},e),{},{userCard:Object(ee.a)(Object(ee.a)({},e.userCard),{},{photos:Object(ee.a)({},t.photos)})});case It:return Object(ee.a)(Object(ee.a)({},e),{},{itsMe:t.bool});default:return e}},Wt=function(e){return{isAuth:Re(e)}},zt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).changeUserStatus=function(t){e.props.setUserStatusThunkCreator(t)},e.setNewProfilePhoto=function(t){e.props.setNewProfilePhotoThunkCallback(t)},e.sendEditProfileData=function(t){return e.props.sendEditProfileDataThunkCallback(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.requestUserData()}},{key:"requestUserData",value:function(){var e=this.props.match.params.userId;this.props.getCurrentUserDataThunkCreator(e),this.props.getUserStatusThunkCreator(e)}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.requestUserData()}},{key:"render",value:function(){return console.log("Render"),this.props.isInitialized?r.a.createElement("div",null,r.a.createElement(St,{userCard:this.props.userCard,status:this.props.status,changeUserStatus:this.changeUserStatus,isUserCheck:this.props.isUserCheck,setNewProfilePhoto:this.setNewProfilePhoto,sendEditProfileData:this.sendEditProfileData,itsMe:this.props.itsMe})):r.a.createElement(V,null)}}]),a}(r.a.Component),Jt=Object(Y.d)(Object(H.b)((function(e){return{userCard:Te(e),isInitialized:xe(e),status:Ie(e),isUserCheck:De(e),itsMe:Le(e)}}),{getCurrentUserDataThunkCreator:Bt,getUserStatusThunkCreator:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a,n){var r,s,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authPage.userTechnicalData.id,s=e||r,t.next=4,ne(s);case 4:c=t.sent,a(Rt(c.data));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setUserStatusThunkCreator:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(e);case 2:a(Rt(e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setNewProfilePhotoThunkCallback:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a){var n,r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",e),t.next=4,se(n);case 4:r=t.sent,console.log("1"),0===r.data.resultCode&&a((s=r.data.data.photos,{type:xt,photos:s}));case 7:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},sendEditProfileDataThunkCallback:function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a,n){var r,s,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().profilePage.userCard.userId,t.next=3,ce(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}a(Bt(r)),t.next=12;break;case 8:if(1!==s.data.resultCode){t.next=12;break}return c=s.data.messages.length>0?s.data.messages:"UnknownError",a(Object(wt.a)("edit-profile",{_error:c})),t.abrupt("return",Promise.reject(c));case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),(function(e){var t=function(t){Object(l.a)(n,t);var a=Object(u.a)(n);function n(e){return Object(o.a)(this,n),a.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(p.a,{to:"/login"})}}]),n}(r.a.Component);return Object(H.b)(Wt,{})(t)}),p.f)(zt),qt=function(e){return e||"number"===typeof e?void 0:"Required"},Vt=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},Zt=a(143),Yt=a.n(Zt),Ht=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.captchaUrl,alt:"captcha"}),r.a.createElement(dt.a,{type:"text",name:"captcha",component:kt}))},Xt=Object(Y.d)(Object(bt.a)({form:"login"}))((function(e){return e.isAuth?r.a.createElement(p.a,{to:"/profile"}):r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(dt.a,{type:"text",name:"email",placeholder:"email",component:kt,validate:[qt,Vt]}),r.a.createElement(dt.a,{type:"password",name:"password",placeholder:"password",component:kt,validate:[qt]}),r.a.createElement(dt.a,{type:"checkbox",name:"rememberMe",component:kt}),r.a.createElement(d,{value:"Send"}),e.captchaUrl&&r.a.createElement(Ht,{captchaUrl:e.captchaUrl}),e.error&&r.a.createElement("span",{className:Yt.a.error},e.error))})),Kt="bank-app/auth-reducer/TOGGLE_USER_AUTH",Qt="bank-app/auth-reducer/SET_LOGIN_USER_DATA",$t="bank-app/auth-reducer/LOGOUT_USER",ea="bank-app/auth-reducer/GET_CAPTCHA",ta={isAuth:!1,userTechnicalData:{id:null,email:null,login:null},initialized:!1,captchaUrl:null},aa=function(e){return{type:"bank-app/auth-reducer/SET_INITIALIZED",bool:e}},na=function(){return function(){var e=Object(Q.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:0===(a=e.sent).data.resultCode&&(t({type:Kt,bool:!0}),t((n=a.data.data,{type:Qt,dataFromApi:n})));case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()},ra=function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(a){var n,r,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(aa(!1)),t.next=3,ie(e);case 3:if(n=t.sent,a(aa(!0)),0!==n.data.resultCode){t.next=9;break}a(na()),t.next=16;break;case 9:if(r=n.data.messages.length>0?n.data.messages[0]:"Unknown error",a(Object(wt.a)("login",{_error:r})),10!==n.data.resultCode){t.next=16;break}return t.next=14,ue();case 14:s=t.sent,a((c=s.data.url,{type:ea,captchaUrl:c}));case 16:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}()},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt:return Object(ee.a)(Object(ee.a)({},e),{},{isAuth:t.bool});case Qt:return Object(ee.a)(Object(ee.a)({},e),{},{userTechnicalData:Object(ee.a)({},t.dataFromApi)});case"bank-app/auth-reducer/SET_INITIALIZED":return Object(ee.a)(Object(ee.a)({},e),{},{initialized:t.bool});case $t:return Object(ee.a)(Object(ee.a)({},e),{},{isAuth:!1,userTechnicalData:{id:null,email:null,login:null},initialized:!1});case ea:return Object(ee.a)(Object(ee.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}},ca=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.isAuth?r.a.createElement(p.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement(Xt,{onSubmit:function(t){e.props.setUserLoginDataThunkCallback(t)},captchaUrl:this.props.captchaUrl,isAuth:this.props.isAuth}))}}]),a}(r.a.Component),oa=Object(Y.d)(Object(H.b)((function(e){return{captchaUrl:Me(e)}}),{setUserLoginDataThunkCallback:ra}))(ca),ia=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getInitializedStateThunkCallback()}},{key:"componentDidUpdate",value:function(e,t){if(e!==this.props||t!==this.state)return!0}},{key:"render",value:function(){var e=this;return this.props.initialized?r.a.createElement("div",{className:"App"},r.a.createElement(j,{isAuth:this.props.isAuth,login:this.props.login,logoutThunkCallback:this.props.logoutThunkCallback}),r.a.createElement(y,null),r.a.createElement("div",{className:"content"},r.a.createElement(p.b,{path:"/users",render:function(){return r.a.createElement(Ve,{myId:e.props.myId})}}),r.a.createElement(p.b,{path:"/dialogs",render:function(){return r.a.createElement(Ze,null)}}),r.a.createElement(p.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Jt,{isAuth:e.props.isAuth})}}),r.a.createElement(p.b,{path:"/login",render:function(){return r.a.createElement(oa,{isAuth:e.props.isAuth})}}))):r.a.createElement(V,null)}}]),a}(r.a.PureComponent),la=Object(Y.d)(Object(H.b)((function(e){return{isAuth:Re(e),initialized:e.authPage.initialized,login:e.authPage.userTechnicalData.login,myId:e.authPage.userTechnicalData.id}}),{setUserLoginDataThunkCallback:ra,getInitializedStateThunkCallback:function(){return function(){var e=Object(Q.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t(na()),Promise.all([a]).then((function(){t(aa(!0)),console.log("wow")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},logoutThunkCallback:function(){return function(){var e=Object(Q.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:0===e.sent.data.resultCode&&(t({type:$t}),t(na()),t(aa(!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(ia);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ua=a(144),pa=a(128),ma=Object(Y.c)({profilePage:Gt,authPage:sa,usersPage:Ae,form:pa.a}),fa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.d,da=Object(Y.e)(ma,fa(Object(Y.a)(ua.a)));window.store=da;var ba=da;c.a.render(r.a.createElement(U.a,null,r.a.createElement(H.a,{store:ba},r.a.createElement(la,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,t,a){e.exports={avatar:"LargeAvatar_avatar__2GKzS",overlay:"LargeAvatar_overlay__Da87J",wrapForInput:"LargeAvatar_wrapForInput__1iVX5",label:"LargeAvatar_label__MkvTS"}},52:function(e,t,a){e.exports={section:"Sidebar_section__3Y11I",item:"Sidebar_item__fDWpc"}},53:function(e,t,a){e.exports={section:"UserCard_section__2LYg0",infoWrap:"UserCard_infoWrap__10AoD",info:"UserCard_info__Ezunh"}},65:function(e,t,a){e.exports=a.p+"static/media/default-user.6843ac29.jpg"},68:function(e,t,a){e.exports={name:"UserAbout_name__WD23q",about:"UserAbout_about__2cveV"}},69:function(e,t,a){e.exports={check:"VerifyElem_check__2IdGH",fail:"VerifyElem_fail__QX0E-"}},91:function(e,t,a){e.exports={section:"UserStatus_section__1Jzb-",input:"UserStatus_input__1nivs"}},92:function(e,t,a){e.exports={formControl:"FormControls_formControl__3hAmW",error:"FormControls_error__wcfi2"}}},[[171,1,2]]]);
//# sourceMappingURL=main.43f39e8e.chunk.js.map